9@PostMapping("/credits")
public Mono<ResponseEntity<BffResponse<List<Dto>, Void>>> credit(@RequestBody CreditDto request) {
    return service.getCredits(request)
            .map(ResponseEntity::ok)
            .defaultIfEmpty(ResponseEntity.noContent().build());
}

implementation 'org.springframework.boot:spring-boot-starter-webflux'




@Test
void getCreditProductById_ReturnsProduct() {
    var creditProduct = new CREDITPRODUCT(/* set fields */);
    var response = new CreditProducTRESPOMSE<CREDITPRODUCT>();
    response.setData(creditProduct); // O como sea que se le asigna

    when(service.getCreditProductById("123")).thenReturn(Mono.just(response));

    webTestClient.get()
        .uri("/api/credit-products/123")
        .exchange()
        .expectStatus().isOk()
        .expectBody(new ParameterizedTypeReference<CreditProducTRESPOMSE<CREDITPRODUCT>>() {})
        .isEqualTo(response);
}


webTestClient.get()
    .uri("/api/credit-products/123")
    .exchange()
    .expectStatus().isOk()
    .expectBody(new ParameterizedTypeReference<CreditProducTRESPOMSE<CREDITPRODUCT>>() {})
    .consumeWith(response -> {
        var body = response.getResponseBody();
        assertThat(body).isNotNull();
        assertThat(body.getData().getId()).isEqualTo("123"); // segÃºn tu clase
    });



webTestClient.get()
    .uri(uriBuilder -> uriBuilder
        .path("/api/credit-products")
        .queryParam("status", "ACTIVE")
        .build())
    .header("Authorization", "Bearer tu-token")
    .accept(MediaType.APPLICATION_JSON)
    .exchange()