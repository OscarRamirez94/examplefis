import org.springframework.stereotype.Service;
import reactor.core.publisher.Flux;

@Service
public class OrderServiceImpl implements OrderService {

    @Override
    public Flux<OrderDTO> getApprovedOrders() {
        return generateMockOrders()
                .filter(order -> "APPROVED".equals(order.getStatus()));
    }

    // Método mock momentáneo que genera 10k registros
    private Flux<OrderDTO> generateMockOrders() {
        return Flux.range(1, 10_000)
                .map(i -> new OrderDTO(
                        "Order-" + i,
                        i % 2 == 0 ? "APPROVED" : "REJECTED"
                ));
    }
}